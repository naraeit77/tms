# ğŸ¤– AI-Powered SQL Tuning Advisor
## Oracle íŠœë‹ê´€ë¦¬ì‹œìŠ¤í…œ TMS v2.0 - AI ê¸°ëŠ¥ ì¶”ê°€

---

## 1. AI íŠœë‹ ì–´ë“œë°”ì´ì € ê°œìš”

### 1.1 ê¸°ëŠ¥ ì •ì˜
AI ê¸°ë°˜ SQL íŠœë‹ ì–´ë“œë°”ì´ì €ëŠ” ë¨¸ì‹ ëŸ¬ë‹ê³¼ ê·œì¹™ ê¸°ë°˜ ì—”ì§„ì„ ê²°í•©í•˜ì—¬ SQL ì„±ëŠ¥ ë¬¸ì œë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ê³ , ìµœì ì˜ íŠœë‹ ë°©ì•ˆì„ ì œì‹œí•˜ëŠ” ì§€ëŠ¥í˜• ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê°€ì¹˜
- **ìë™ ì§„ë‹¨**: SQL ì„±ëŠ¥ ë¬¸ì œ ìë™ ì‹ë³„
- **ì§€ëŠ¥í˜• ì¶”ì²œ**: ë§ì¶¤í˜• íŠœë‹ ë°©ë²• ì œì•ˆ
- **í•™ìŠµ ê¸°ë°˜**: ê³¼ê±° íŠœë‹ ì´ë ¥ í•™ìŠµ
- **ì˜ˆì¸¡ ë¶„ì„**: ê°œì„ ìœ¨ ì‚¬ì „ ì˜ˆì¸¡

---

## 2. AI ì•„í‚¤í…ì²˜

### 2.1 ì‹œìŠ¤í…œ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AI Tuning Advisor                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   SQL       â”‚  â”‚   Pattern   â”‚  â”‚   ML        â”‚   â”‚
â”‚  â”‚  Analyzer   â”‚â”€â”€â–¶â”‚  Matching   â”‚â”€â”€â–¶â”‚  Engine     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                â”‚                 â”‚           â”‚
â”‚         â–¼                â–¼                 â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚          Knowledge Base & Rules              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          â”‚                             â”‚
â”‚                          â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         Recommendation Engine                â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          â”‚                             â”‚
â”‚                          â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Tuning    â”‚  â”‚   Impact    â”‚  â”‚   Guide     â”‚   â”‚
â”‚  â”‚   Methods   â”‚  â”‚  Prediction â”‚  â”‚  Generation â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 AI ì»´í¬ë„ŒíŠ¸

#### SQL Analyzer
- SQL êµ¬ë¬¸ íŒŒì‹±
- ì‹¤í–‰ê³„íš ë¶„ì„
- ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- ë¬¸ì œ íŒ¨í„´ ì‹ë³„

#### Pattern Matching Engine
- ì¼ë°˜ì ì¸ ì•ˆí‹°íŒ¨í„´ ê°ì§€
- ìœ ì‚¬ SQL ë§¤ì¹­
- ì´ë ¥ ê¸°ë°˜ íŒ¨í„´ í•™ìŠµ

#### ML Engine
- ì„±ëŠ¥ ì˜ˆì¸¡ ëª¨ë¸
- íŠœë‹ íš¨ê³¼ ì˜ˆì¸¡
- ì´ìƒ íƒì§€

#### Knowledge Base
- íŠœë‹ ê·œì¹™ ì €ì¥ì†Œ
- Best Practice DB
- íŠœë‹ ì´ë ¥ ì €ì¥ì†Œ

---

## 3. AI íŠœë‹ ë¶„ì„ ê¸°ëŠ¥

### 3.1 ìë™ ë¬¸ì œ ì§„ë‹¨

#### ì§„ë‹¨ í•­ëª©
```json
{
  "diagnosis": {
    "performance_issues": [
      {
        "type": "FULL_TABLE_SCAN",
        "severity": "CRITICAL",
        "impact": "95% of execution time",
        "table": "ORDERS",
        "rows": 5000000,
        "detection_confidence": 0.98
      },
      {
        "type": "MISSING_INDEX",
        "severity": "HIGH",
        "impact": "Could reduce buffer gets by 80%",
        "columns": ["ORDER_DATE", "CUSTOMER_ID"],
        "detection_confidence": 0.92
      },
      {
        "type": "INEFFICIENT_JOIN",
        "severity": "MEDIUM",
        "impact": "Cartesian product detected",
        "tables": ["ORDERS", "CUSTOMERS"],
        "detection_confidence": 0.85
      }
    ],
    "root_cause": "Missing index on large table causing full scan"
  }
}
```

### 3.2 íŠœë‹ ë°©ë²• ì¶”ì²œ

#### AI ì¶”ì²œ ì‹œìŠ¤í…œ
```python
class AITuningRecommender:
    def analyze_sql(self, sql_text, execution_plan, metrics):
        # 1. SQL íŒ¨í„´ ë¶„ì„
        patterns = self.detect_patterns(sql_text)
        
        # 2. ì‹¤í–‰ê³„íš ë¶„ì„
        plan_issues = self.analyze_plan(execution_plan)
        
        # 3. ì„±ëŠ¥ ë©”íŠ¸ë¦­ ë¶„ì„
        metric_issues = self.analyze_metrics(metrics)
        
        # 4. ì¢…í•© ì¶”ì²œ ìƒì„±
        recommendations = self.generate_recommendations(
            patterns, plan_issues, metric_issues
        )
        
        # 5. ìš°ì„ ìˆœìœ„ ì •ë ¬
        return self.prioritize_recommendations(recommendations)
```

### 3.3 ì˜ˆìƒ ê°œì„ ìœ¨ ê³„ì‚°

```javascript
// AI ê¸°ë°˜ ê°œì„ ìœ¨ ì˜ˆì¸¡ ëª¨ë¸
const predictImprovement = (sqlFeatures, tuningMethod) => {
  const model = loadMLModel('improvement_predictor');
  
  const features = {
    current_elapsed_time: sqlFeatures.elapsedTime,
    current_buffer_gets: sqlFeatures.bufferGets,
    table_size: sqlFeatures.tableRows,
    index_availability: sqlFeatures.hasIndex,
    tuning_method: tuningMethod,
    historical_success_rate: getHistoricalRate(tuningMethod)
  };
  
  const prediction = model.predict(features);
  
  return {
    expected_improvement: prediction.improvement_rate,
    confidence: prediction.confidence,
    min_improvement: prediction.lower_bound,
    max_improvement: prediction.upper_bound
  };
};
```

---

## 4. íŠœë‹ ê°€ì´ë“œ ìƒì„±

### 4.1 ë‹¨ê³„ë³„ íŠœë‹ ê°€ì´ë“œ

```json
{
  "tuning_guide": {
    "sql_id": "abc123def456",
    "total_steps": 5,
    "estimated_time": "30 minutes",
    "difficulty": "MEDIUM",
    "steps": [
      {
        "step": 1,
        "title": "í˜„ì¬ ì‹¤í–‰ê³„íš ë°±ì—…",
        "description": "íŠœë‹ ì „ í˜„ì¬ ìƒíƒœë¥¼ ë³´ì¡´í•©ë‹ˆë‹¤",
        "command": "CREATE OUTLINE old_plan FOR CATEGORY temp_outlines...",
        "risk": "LOW",
        "rollback": "DROP OUTLINE old_plan"
      },
      {
        "step": 2,
        "title": "ì¸ë±ìŠ¤ ìƒì„±",
        "description": "ORDERS í…Œì´ë¸”ì— ë³µí•© ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤",
        "command": "CREATE INDEX idx_orders_date_cust ON orders(order_date, customer_id) PARALLEL 8",
        "expected_improvement": "Buffer Gets 80% ê°ì†Œ",
        "risk": "MEDIUM",
        "considerations": [
          "ì¸ë±ìŠ¤ ìƒì„± ì¤‘ DML ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥",
          "ì¶”ê°€ ìŠ¤í† ë¦¬ì§€ í•„ìš”: ì•½ 2GB",
          "ì¸ë±ìŠ¤ ìœ ì§€ë³´ìˆ˜ ì˜¤ë²„í—¤ë“œ ë°œìƒ"
        ]
      },
      {
        "step": 3,
        "title": "í†µê³„ì •ë³´ ìˆ˜ì§‘",
        "description": "ìƒˆ ì¸ë±ìŠ¤ì— ëŒ€í•œ í†µê³„ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤",
        "command": "EXEC DBMS_STATS.GATHER_INDEX_STATS('SCOTT', 'IDX_ORDERS_DATE_CUST')",
        "risk": "LOW"
      },
      {
        "step": 4,
        "title": "SQL ì¬ì‹¤í–‰ ë° ê²€ì¦",
        "description": "ê°œì„ ëœ ì‹¤í–‰ê³„íš í™•ì¸",
        "validation_queries": [
          "SELECT * FROM v$sql WHERE sql_id = 'abc123def456'",
          "SELECT * FROM table(DBMS_XPLAN.DISPLAY_CURSOR('abc123def456'))"
        ]
      },
      {
        "step": 5,
        "title": "ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§",
        "description": "24ì‹œê°„ ë™ì•ˆ ì„±ëŠ¥ ì¶”ì´ ê´€ì°°",
        "monitoring_metrics": [
          "Elapsed Time < 500ms",
          "Buffer Gets < 10000",
          "CPU Usage < 20%"
        ]
      }
    ]
  }
}
```

### 4.2 AI ìƒì„± íŠœë‹ ìŠ¤í¬ë¦½íŠ¸

```sql
-- AIê°€ ìƒì„±í•œ íŠœë‹ ìŠ¤í¬ë¦½íŠ¸
-- SQL ID: abc123def456
-- ìƒì„±ì¼ì‹œ: 2025-01-08 10:30:00
-- ì˜ˆìƒ ê°œì„ ìœ¨: 85%

-- Step 1: í˜„ì¬ ìƒíƒœ ì €ì¥
CREATE TABLE tuning_backup_20250108 AS
SELECT * FROM v$sql WHERE sql_id = 'abc123def456';

-- Step 2: ì¸ë±ìŠ¤ ìƒì„± (AI ì¶”ì²œ)
CREATE INDEX idx_orders_opt ON orders(
  order_date,     -- Selectivity: 0.001
  customer_id,    -- Selectivity: 0.0001
  status          -- Filtering column
) 
TABLESPACE indexes
PARALLEL 8
NOLOGGING;

-- Step 3: íŒíŠ¸ ì¶”ê°€ëœ SQL (ëŒ€ì•ˆ)
SELECT /*+ INDEX(o idx_orders_opt) 
           PARALLEL(o, 4)
           GATHER_PLAN_STATISTICS */
       o.order_id,
       o.order_date,
       c.customer_name
FROM   orders o
JOIN   customers c ON o.customer_id = c.customer_id
WHERE  o.order_date >= SYSDATE - 30
AND    o.status = 'PENDING';

-- Step 4: í†µê³„ ìˆ˜ì§‘
BEGIN
  DBMS_STATS.GATHER_TABLE_STATS(
    ownname => 'SCOTT',
    tabname => 'ORDERS',
    cascade => TRUE,
    estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE,
    method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO'
  );
END;
/

-- Step 5: ê²€ì¦ ì¿¼ë¦¬
SELECT 
  sql_id,
  elapsed_time,
  buffer_gets,
  cpu_time,
  executions
FROM v$sql 
WHERE sql_id = 'abc123def456'
AND last_active_time > SYSDATE - 1/24;
```

---

## 5. AI íŒ¨í„´ ì¸ì‹

### 5.1 SQL ì•ˆí‹°íŒ¨í„´ ê°ì§€

#### ê°ì§€ ê°€ëŠ¥í•œ íŒ¨í„´
```javascript
const antiPatterns = {
  // N+1 Query Problem
  "N_PLUS_ONE": {
    pattern: /SELECT.*FROM.*WHERE.*IN\s*\(SELECT/i,
    severity: "HIGH",
    solution: "JOINìœ¼ë¡œ ë³€ê²½ ë˜ëŠ” ë°°ì¹˜ ì²˜ë¦¬"
  },
  
  // Missing Index
  "FULL_SCAN_LARGE_TABLE": {
    pattern: /TABLE ACCESS FULL/,
    condition: "rows > 100000",
    severity: "CRITICAL",
    solution: "ì ì ˆí•œ ì¸ë±ìŠ¤ ìƒì„±"
  },
  
  // Implicit Conversion
  "IMPLICIT_CONVERSION": {
    pattern: /TO_NUMBER|TO_CHAR|TO_DATE/,
    severity: "MEDIUM",
    solution: "ë°ì´í„° íƒ€ì… ì¼ì¹˜"
  },
  
  // Cartesian Join
  "CARTESIAN_PRODUCT": {
    pattern: /MERGE JOIN CARTESIAN|NESTED LOOPS/,
    severity: "CRITICAL",
    solution: "JOIN ì¡°ê±´ ì¶”ê°€"
  },
  
  // SELECT *
  "SELECT_STAR": {
    pattern: /SELECT\s+\*/,
    severity: "LOW",
    solution: "í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì„ íƒ"
  },
  
  // OR Condition
  "OR_CONDITION": {
    pattern: /WHERE.*\sOR\s/i,
    severity: "MEDIUM",
    solution: "UNION ALLë¡œ ë³€ê²½ ê²€í† "
  }
};
```

### 5.2 ìœ ì‚¬ SQL ë§¤ì¹­

```python
class SimilarSQLMatcher:
    def find_similar_sqls(self, target_sql):
        """ê³¼ê±° íŠœë‹ëœ ìœ ì‚¬ SQL ê²€ìƒ‰"""
        
        # 1. SQL ë²¡í„°í™”
        target_vector = self.vectorize_sql(target_sql)
        
        # 2. ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚°
        similar_sqls = []
        for historical_sql in self.tuning_history:
            similarity = cosine_similarity(
                target_vector, 
                historical_sql['vector']
            )
            
            if similarity > 0.85:  # 85% ì´ìƒ ìœ ì‚¬
                similar_sqls.append({
                    'sql_id': historical_sql['sql_id'],
                    'similarity': similarity,
                    'tuning_method': historical_sql['method'],
                    'improvement': historical_sql['improvement']
                })
        
        # 3. ìœ ì‚¬ë„ ìˆœ ì •ë ¬
        return sorted(similar_sqls, 
                     key=lambda x: x['similarity'], 
                     reverse=True)
```

---

## 6. AI í•™ìŠµ ëª¨ë¸

### 6.1 íŠœë‹ ì„±ê³µ ì˜ˆì¸¡ ëª¨ë¸

```python
import tensorflow as tf
from sklearn.ensemble import RandomForestRegressor

class TuningSuccessPredictor:
    def __init__(self):
        self.model = self.build_model()
        
    def build_model(self):
        """ë”¥ëŸ¬ë‹ ëª¨ë¸ êµ¬ì„±"""
        model = tf.keras.Sequential([
            tf.keras.layers.Dense(128, activation='relu'),
            tf.keras.layers.Dropout(0.2),
            tf.keras.layers.Dense(64, activation='relu'),
            tf.keras.layers.Dropout(0.2),
            tf.keras.layers.Dense(32, activation='relu'),
            tf.keras.layers.Dense(1, activation='sigmoid')
        ])
        
        model.compile(
            optimizer='adam',
            loss='mse',
            metrics=['mae', 'accuracy']
        )
        
        return model
    
    def predict_success_rate(self, sql_features, tuning_method):
        """íŠœë‹ ì„±ê³µë¥  ì˜ˆì¸¡"""
        
        # Feature Engineering
        features = self.extract_features(sql_features)
        method_encoded = self.encode_method(tuning_method)
        
        # ì˜ˆì¸¡
        X = np.concatenate([features, method_encoded])
        prediction = self.model.predict(X)
        
        return {
            'success_probability': float(prediction[0]),
            'confidence_interval': self.calculate_confidence(prediction),
            'risk_level': self.assess_risk(prediction[0])
        }
```

### 6.2 ìë™ í•™ìŠµ íŒŒì´í”„ë¼ì¸

```yaml
learning_pipeline:
  data_collection:
    - source: v$sql
      frequency: hourly
    - source: tuning_history
      frequency: daily
    
  feature_extraction:
    - sql_complexity_score
    - table_statistics
    - index_usage_patterns
    - historical_performance
    
  model_training:
    - algorithm: ensemble
      models:
        - random_forest
        - gradient_boosting
        - neural_network
    - validation: k-fold_cross_validation
    - metrics:
        - accuracy
        - precision
        - recall
        - f1_score
    
  model_deployment:
    - versioning: enabled
    - a_b_testing: true
    - rollback: automatic
    
  continuous_learning:
    - feedback_loop: enabled
    - retraining_trigger:
        - accuracy_drop: 5%
        - new_data_threshold: 1000
```

---

## 7. AI ëŒ€ì‹œë³´ë“œ UI

### 7.1 AI ì¸ì‚¬ì´íŠ¸ ìœ„ì ¯

```html
<!-- AI íŠœë‹ ì¸ì‚¬ì´íŠ¸ ëŒ€ì‹œë³´ë“œ -->
<div class="ai-insights-dashboard">
  <!-- AI ë¶„ì„ ìš”ì•½ -->
  <div class="ai-summary-card">
    <h3>ğŸ¤– AI íŠœë‹ ë¶„ì„</h3>
    <div class="ai-metrics">
      <div class="metric">
        <span class="value">23</span>
        <span class="label">íŠœë‹ í•„ìš” SQL</span>
      </div>
      <div class="metric">
        <span class="value">85%</span>
        <span class="label">ì˜ˆìƒ í‰ê·  ê°œì„ ìœ¨</span>
      </div>
      <div class="metric">
        <span class="value">2.3h</span>
        <span class="label">ì˜ˆìƒ ì‘ì—… ì‹œê°„</span>
      </div>
    </div>
  </div>
  
  <!-- AI ì¶”ì²œ ìš°ì„ ìˆœìœ„ -->
  <div class="ai-recommendations">
    <h4>AI ì¶”ì²œ íŠœë‹ ëŒ€ìƒ (ìš°ì„ ìˆœìœ„)</h4>
    <table class="recommendation-table">
      <thead>
        <tr>
          <th>ìˆœìœ„</th>
          <th>SQL ID</th>
          <th>ë¬¸ì œ ìœ í˜•</th>
          <th>ì˜ˆìƒ ê°œì„ ìœ¨</th>
          <th>AI ì‹ ë¢°ë„</th>
          <th>ì•¡ì…˜</th>
        </tr>
      </thead>
      <tbody>
        <tr class="critical">
          <td>1</td>
          <td>abc123def</td>
          <td>
            <span class="issue-badge">Full Table Scan</span>
            <span class="issue-badge">Missing Index</span>
          </td>
          <td>
            <div class="improvement-bar">
              <div class="bar" style="width: 92%">92%</div>
            </div>
          </td>
          <td>
            <div class="confidence high">98%</div>
          </td>
          <td>
            <button onclick="showAIGuide('abc123def')">
              AI ê°€ì´ë“œ ë³´ê¸°
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <!-- AI íŠœë‹ ê°€ì´ë“œ ëª¨ë‹¬ -->
  <div id="aiGuideModal" class="modal">
    <div class="modal-content">
      <h3>ğŸ¤– AI íŠœë‹ ê°€ì´ë“œ</h3>
      
      <!-- ë¬¸ì œ ì§„ë‹¨ -->
      <div class="diagnosis-section">
        <h4>ğŸ“Š ë¬¸ì œ ì§„ë‹¨</h4>
        <div class="diagnosis-cards">
          <div class="diagnosis-card critical">
            <div class="icon">âš ï¸</div>
            <div class="content">
              <strong>Full Table Scan</strong>
              <p>ORDERS í…Œì´ë¸” (5M rows) ì „ì²´ ìŠ¤ìº” ë°œìƒ</p>
              <small>ì˜í–¥ë„: ì‹¤í–‰ì‹œê°„ì˜ 85%</small>
            </div>
          </div>
          <div class="diagnosis-card high">
            <div class="icon">ğŸ”</div>
            <div class="content">
              <strong>Missing Index</strong>
              <p>ORDER_DATE, CUSTOMER_ID ì»¬ëŸ¼ ì¸ë±ìŠ¤ ë¶€ì¬</p>
              <small>ê°œì„  ê°€ëŠ¥: Buffer Gets 80% ê°ì†Œ</small>
            </div>
          </div>
        </div>
      </div>
      
      <!-- íŠœë‹ ë°©ë²• -->
      <div class="tuning-methods">
        <h4>ğŸ› ï¸ ì¶”ì²œ íŠœë‹ ë°©ë²•</h4>
        <div class="method-tabs">
          <button class="tab active">ì¸ë±ìŠ¤ ìƒì„±</button>
          <button class="tab">SQL ì¬ì‘ì„±</button>
          <button class="tab">íŒŒí‹°ì…”ë‹</button>
        </div>
        
        <div class="method-content">
          <div class="step-guide">
            <div class="step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h5>ì¸ë±ìŠ¤ ìƒì„±</h5>
                <pre><code>CREATE INDEX idx_orders_opt 
ON orders(order_date, customer_id)
TABLESPACE indexes PARALLEL 8;</code></pre>
                <p class="impact">ì˜ˆìƒ íš¨ê³¼: Elapsed Time 90% ê°ì†Œ</p>
              </div>
            </div>
            
            <div class="step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h5>í†µê³„ì •ë³´ ìˆ˜ì§‘</h5>
                <pre><code>EXEC DBMS_STATS.GATHER_INDEX_STATS(
  'SCOTT', 'IDX_ORDERS_OPT');</code></pre>
              </div>
            </div>
            
            <div class="step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h5>ê²€ì¦</h5>
                <p>ìƒˆë¡œìš´ ì‹¤í–‰ê³„íš í™•ì¸ ë° ì„±ëŠ¥ ì¸¡ì •</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ì˜ˆìƒ ê²°ê³¼ -->
      <div class="expected-results">
        <h4>ğŸ“ˆ ì˜ˆìƒ ê°œì„  ê²°ê³¼</h4>
        <div class="before-after">
          <div class="before">
            <h5>Before</h5>
            <ul>
              <li>Elapsed Time: 5,234ms</li>
              <li>Buffer Gets: 523,456</li>
              <li>Cost: 12,345</li>
            </ul>
          </div>
          <div class="arrow">â†’</div>
          <div class="after">
            <h5>After</h5>
            <ul>
              <li>Elapsed Time: 234ms (-95%)</li>
              <li>Buffer Gets: 4,567 (-99%)</li>
              <li>Cost: 456 (-96%)</li>
            </ul>
          </div>
        </div>
      </div>
      
      <!-- ìë™ ì‹¤í–‰ ì˜µì…˜ -->
      <div class="auto-execute">
        <h4>ğŸš€ ìë™ ì‹¤í–‰</h4>
        <div class="auto-options">
          <label>
            <input type="checkbox" checked> í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë¨¼ì € ì‹¤í–‰
          </label>
          <label>
            <input type="checkbox"> ì‹¤í–‰ ì „ ìŠ¹ì¸ ìš”ì²­
          </label>
          <label>
            <input type="checkbox" checked> ìë™ ë¡¤ë°± ì„¤ì •
          </label>
        </div>
        <button class="btn-primary" onclick="executeAITuning()">
          AI íŠœë‹ ì‹¤í–‰
        </button>
      </div>
    </div>
  </div>
</div>
```

---

## 8. AI ê¸°ëŠ¥ í†µí•©

### 8.1 ì‹œìŠ¤í…œ í†µí•© í¬ì¸íŠ¸

```javascript
// TMS ì‹œìŠ¤í…œì— AI ê¸°ëŠ¥ í†µí•©
class TMSWithAI {
  constructor() {
    this.aiAdvisor = new AITuningAdvisor();
    this.mlEngine = new MLEngine();
    this.patternMatcher = new PatternMatcher();
  }
  
  // SQL ëª¨ë‹ˆí„°ë§ì— AI ë¶„ì„ ì¶”ê°€
  async monitorSQL(sqlId) {
    const sqlData = await this.fetchSQLData(sqlId);
    
    // ê¸°ì¡´ ëª¨ë‹ˆí„°ë§
    const metrics = this.calculateMetrics(sqlData);
    
    // AI ë¶„ì„ ì¶”ê°€
    const aiAnalysis = await this.aiAdvisor.analyze(sqlData);
    
    return {
      ...metrics,
      ai_insights: aiAnalysis,
      recommendations: aiAnalysis.recommendations,
      predicted_improvement: aiAnalysis.improvement_rate
    };
  }
  
  // íŠœë‹ ì›Œí¬í”Œë¡œìš°ì— AI ê°€ì´ë“œ ì¶”ê°€
  async createTuningTask(sqlId) {
    const aiGuide = await this.aiAdvisor.generateGuide(sqlId);
    
    return {
      sql_id: sqlId,
      ai_guided: true,
      steps: aiGuide.steps,
      expected_results: aiGuide.predictions,
      auto_executable: aiGuide.automation_ready
    };
  }
  
  // ìë™ íŠœë‹ ì‹¤í–‰
  async executeAutoTuning(sqlId, options = {}) {
    const { testFirst = true, requireApproval = false } = options;
    
    if (testFirst) {
      const testResult = await this.testInSandbox(sqlId);
      if (!testResult.success) {
        return { status: 'failed', reason: testResult.error };
      }
    }
    
    if (requireApproval) {
      await this.requestApproval(sqlId);
    }
    
    const result = await this.aiAdvisor.executeTuning(sqlId);
    
    // í•™ìŠµì„ ìœ„í•œ í”¼ë“œë°± ì €ì¥
    await this.mlEngine.saveFeedback(sqlId, result);
    
    return result;
  }
}
```

### 8.2 REST API ì—”ë“œí¬ì¸íŠ¸

```yaml
# AI íŠœë‹ API ëª…ì„¸
/api/v1/ai-tuning:
  
  # AI ë¶„ì„ ìš”ì²­
  POST /analyze:
    request:
      sql_id: string
      include_history: boolean
      prediction_depth: enum[basic, detailed, comprehensive]
    response:
      diagnosis: object
      recommendations: array
      predicted_improvement: number
      confidence: number
  
  # AI ê°€ì´ë“œ ìƒì„±
  GET /guide/{sql_id}:
    response:
      steps: array
      scripts: array
      expected_results: object
      risk_assessment: object
  
  # ìœ ì‚¬ SQL ê²€ìƒ‰
  POST /find-similar:
    request:
      sql_text: string
      threshold: number
    response:
      similar_sqls: array
      tuning_methods: array
  
  # ìë™ íŠœë‹ ì‹¤í–‰
  POST /execute:
    request:
      sql_id: string
      method: string
      auto_rollback: boolean
    response:
      status: string
      before_metrics: object
      after_metrics: object
      improvement: number
  
  # AI ëª¨ë¸ ìƒíƒœ
  GET /model/status:
    response:
      version: string
      accuracy: number
      last_trained: datetime
      predictions_count: number
```

---

## 9. AI ì„±ëŠ¥ ì§€í‘œ

### 9.1 AI íš¨ê³¼ì„± KPI

| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|------|------|-----------|
| AI ì§„ë‹¨ ì •í™•ë„ | > 90% | ì‹¤ì œ ë¬¸ì œ vs AI ì§„ë‹¨ ë¹„êµ |
| ì˜ˆì¸¡ ê°œì„ ìœ¨ ì •í™•ë„ | Â±10% | ì˜ˆì¸¡ê°’ vs ì‹¤ì œ ê°œì„ ìœ¨ |
| ìë™ íŠœë‹ ì„±ê³µë¥  | > 85% | ì„±ê³µ ê±´ìˆ˜ / ì „ì²´ ì‹œë„ |
| False Positive Rate | < 5% | ì˜ëª»ëœ ì¶”ì²œ / ì „ì²´ ì¶”ì²œ |
| í‰ê·  íŠœë‹ ì‹œê°„ ë‹¨ì¶• | 70% | AI ì‚¬ìš© ì „í›„ ë¹„êµ |
| ROI | > 300% | ì ˆê° ì‹œê°„ * ì‹œê°„ë‹¹ ë¹„ìš© |

### 9.2 í•™ìŠµ ë©”íŠ¸ë¦­

```python
# AI ëª¨ë¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
class AIPerformanceMonitor:
    def track_metrics(self):
        return {
            # ëª¨ë¸ ì •í™•ë„
            'model_accuracy': self.calculate_accuracy(),
            
            # ì˜ˆì¸¡ ì„±ëŠ¥
            'mse': self.mean_squared_error(),
            'mae': self.mean_absolute_error(),
            'r2_score': self.r2_score(),
            
            # ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸
            'tuning_time_saved': self.calculate_time_savings(),
            'performance_improvement': self.avg_improvement(),
            'cost_reduction': self.calculate_cost_savings(),
            
            # ì‚¬ìš©ì ë§Œì¡±ë„
            'user_acceptance_rate': self.get_acceptance_rate(),
            'ai_guide_usage_rate': self.get_usage_rate()
        }
```

---

## 10. AI ë³´ì•ˆ ë° ê±°ë²„ë„ŒìŠ¤

### 10.1 AI ì˜ì‚¬ê²°ì • íˆ¬ëª…ì„±

```json
{
  "ai_decision_log": {
    "sql_id": "abc123def456",
    "timestamp": "2025-01-08T10:30:00Z",
    "ai_version": "2.0.1",
    "decision": "RECOMMEND_INDEX",
    "reasoning": {
      "factors": [
        {
          "factor": "full_table_scan",
          "weight": 0.4,
          "score": 0.95
        },
        {
          "factor": "missing_index",
          "weight": 0.3,
          "score": 0.88
        },
        {
          "factor": "historical_pattern",
          "weight": 0.3,
          "score": 0.72
        }
      ],
      "final_score": 0.86,
      "confidence": 0.92
    },
    "human_override": false,
    "audit_trail": ["model_input", "processing", "output", "validation"]
  }
}
```

### 10.2 AI ìœ¤ë¦¬ ê°€ì´ë“œë¼ì¸

- **íˆ¬ëª…ì„±**: ëª¨ë“  AI ê²°ì •ì€ ì„¤ëª… ê°€ëŠ¥í•´ì•¼ í•¨
- **ì±…ì„ì„±**: AI ì¶”ì²œì— ëŒ€í•œ ìµœì¢… ê²°ì •ì€ ì¸ê°„ì´ ìˆ˜í–‰
- **ê³µì •ì„±**: íŠ¹ì • SQLì´ë‚˜ ëª¨ë“ˆì— í¸í–¥ë˜ì§€ ì•ŠìŒ
- **í”„ë¼ì´ë²„ì‹œ**: ë¯¼ê°í•œ ë°ì´í„°ëŠ” í•™ìŠµì—ì„œ ì œì™¸
- **ì•ˆì „ì„±**: Critical ì‹œìŠ¤í…œì€ ìë™ ì‹¤í–‰ ì œì™¸

---

*ë¬¸ì„œ ë²„ì „: 1.0*  
*ì‘ì„±ì¼: 2025-01-08*  
*ì‘ì„±ì: TMS AI Development Team*  
*AI ëª¨ë¸ ë²„ì „: 2.0.1*
