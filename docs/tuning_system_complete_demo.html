<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌäúÎãùÍ¥ÄÎ¶¨ÏãúÏä§ÌÖú TMS v2.0 - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', 'ÎßëÏùÄ Í≥†Îîï', sans-serif;
            font-size: 12px;
            background: #e5e5e5;
            color: #333;
        }
        
        /* Ìó§Îçî ÏòÅÏó≠ */
        .header {
            background: linear-gradient(to right, #2c3e50, #34495e);
            color: white;
            padding: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .system-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .system-title h1 {
            font-size: 18px;
            font-weight: bold;
        }
        
        .user-area {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 11px;
        }
        
        .user-area span {
            padding: 5px 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
        }
        
        /* Î©îÎâ¥ ÏòÅÏó≠ */
        .main-menu {
            background: #34495e;
            padding: 0;
        }
        
        .menu-list {
            display: flex;
            list-style: none;
            padding: 0 20px;
        }
        
        .menu-item {
            position: relative;
        }
        
        .menu-item > a {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            font-size: 13px;
            transition: background 0.3s;
            cursor: pointer;
        }
        
        .menu-item:hover > a,
        .menu-item.active > a {
            background: #2c3e50;
        }
        
        /* ÏÑúÎ∏åÎ©îÎâ¥ */
        .sub-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            min-width: 180px;
            display: none;
            z-index: 1000;
        }
        
        .menu-item:hover .sub-menu {
            display: block;
        }
        
        .sub-menu li {
            list-style: none;
        }
        
        .sub-menu a {
            display: block;
            padding: 10px 15px;
            color: #333;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            font-size: 12px;
            cursor: pointer;
        }
        
        .sub-menu a:hover {
            background: #ecf0f1;
        }
        
        /* Ïª®ÌÖêÏ∏† ÏòÅÏó≠ */
        .container {
            display: flex;
            height: calc(100vh - 90px);
        }
        
        /* Ï¢åÏ∏° Ìä∏Î¶¨Î©îÎâ¥ */
        .sidebar {
            width: 220px;
            background: white;
            border-right: 1px solid #ddd;
            overflow-y: auto;
        }
        
        .tree-menu {
            padding: 10px;
        }
        
        .tree-title {
            background: #ecf0f1;
            padding: 8px;
            font-weight: bold;
            border-bottom: 2px solid #3498db;
            margin-bottom: 10px;
        }
        
        .tree-item {
            padding: 5px 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .tree-item:hover {
            background: #ecf0f1;
        }
        
        .tree-item.active {
            background: #3498db;
            color: white;
        }
        
        .tree-icon {
            width: 16px;
            text-align: center;
        }
        
        /* Î©îÏù∏ Ïª®ÌÖêÏ∏† */
        .main-content {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }
        
        /* Í≤ÄÏÉâ ÏòÅÏó≠ */
        .search-panel {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        
        .search-title {
            font-weight: bold;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #3498db;
        }
        
        .search-form {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            align-items: end;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: bold;
            margin-bottom: 3px;
            font-size: 11px;
            color: #555;
        }
        
        .form-group input,
        .form-group select {
            padding: 5px;
            border: 1px solid #ccc;
            font-size: 11px;
        }
        
        .btn-group {
            display: flex;
            gap: 5px;
            align-items: center;
        }
        
        .btn {
            padding: 6px 15px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: #27ae60;
            color: white;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-default {
            background: #95a5a6;
            color: white;
        }
        
        /* ÌÉ≠ ÏòÅÏó≠ */
        .tab-container {
            background: white;
            border: 1px solid #ddd;
            border-radius: 3px;
            margin-bottom: 15px;
        }
        
        .tab-header {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #ddd;
        }
        
        .tab-button {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 12px;
            position: relative;
            transition: all 0.3s;
        }
        
        .tab-button:hover {
            background: #e9ecef;
        }
        
        .tab-button.active {
            background: white;
            font-weight: bold;
            color: #3498db;
            border-bottom: 2px solid #3498db;
        }
        
        .tab-content {
            padding: 15px;
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Í∑∏Î¶¨Îìú ÌÖåÏù¥Î∏î */
        .grid-container {
            background: white;
            border: 1px solid #ddd;
            border-radius: 3px;
            margin-bottom: 15px;
        }
        
        .grid-header {
            background: #f8f9fa;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;
        }
        
        .grid-title {
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .grid-count {
            background: #e74c3c;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
        }
        
        .grid-tools {
            display: flex;
            gap: 5px;
        }
        
        .grid-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }
        
        .grid-table thead {
            background: #2c3e50;
            color: white;
        }
        
        .grid-table th {
            padding: 8px;
            border: 1px solid #34495e;
            text-align: center;
            font-weight: normal;
            white-space: nowrap;
            cursor: pointer;
            user-select: none;
        }
        
        .grid-table th:hover {
            background: #34495e;
        }
        
        .grid-table td {
            padding: 6px;
            border: 1px solid #dee2e6;
            text-align: center;
        }
        
        .grid-table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .grid-table tbody tr:hover {
            background: #e3f2fd;
            cursor: pointer;
        }
        
        .grid-table tbody tr.selected {
            background: #bbdefb;
        }
        
        /* SQL ÌÖçÏä§Ìä∏ ÏòÅÏó≠ */
        .sql-viewer {
            background: #2c3e50;
            color: #f8f9fa;
            padding: 15px;
            border-radius: 3px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        
        .sql-keyword {
            color: #3498db;
            font-weight: bold;
        }
        
        .sql-table {
            color: #e74c3c;
        }
        
        .sql-column {
            color: #27ae60;
        }
        
        .sql-string {
            color: #f39c12;
        }
        
        .sql-number {
            color: #9b59b6;
        }
        
        /* ÏÉÅÌÉú Î∞∞ÏßÄ */
        .badge {
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }
        
        .badge-critical {
            background: #e74c3c;
            color: white;
        }
        
        .badge-warning {
            background: #f39c12;
            color: white;
        }
        
        .badge-normal {
            background: #27ae60;
            color: white;
        }
        
        .badge-info {
            background: #3498db;
            color: white;
        }
        
        /* Î°úÎî© */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px;
            color: #7f8c8d;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid #3498db;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Ï∞®Ìä∏ ÏòÅÏó≠ */
        .chart-container {
            background: white;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .chart-header {
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .mini-chart {
            height: 200px;
            position: relative;
            overflow: hidden;
        }
        
        .chart-bar {
            display: inline-block;
            width: 30px;
            background: #3498db;
            margin: 0 2px;
            vertical-align: bottom;
            transition: all 0.3s;
        }
        
        .chart-bar:hover {
            background: #2980b9;
        }
        
        /* ÏÑ±Îä• Î©îÌä∏Î¶≠ Ïπ¥Îìú */
        .metric-cards {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .metric-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .metric-label {
            font-size: 10px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .metric-trend {
            font-size: 11px;
            margin-top: 5px;
        }
        
        .trend-up {
            color: #e74c3c;
        }
        
        .trend-down {
            color: #27ae60;
        }
        
        /* Î™®Îã¨ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 9999;
            animation: fadeIn 0.3s;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 5px;
            width: 80%;
            max-width: 900px;
            max-height: 80vh;
            overflow: auto;
            animation: slideIn 0.3s;
        }
        
        .modal-header {
            background: #2c3e50;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* ÌéòÏù¥Ïßï */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            padding: 10px;
            border-top: 1px solid #ddd;
        }
        
        .page-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s;
        }
        
        .page-btn:hover {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .page-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* ÏïåÎ¶º Î©îÏãúÏßÄ */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 3px;
            color: white;
            font-size: 12px;
            z-index: 10000;
            animation: slideInRight 0.3s;
            display: none;
        }
        
        .toast.show {
            display: block;
        }
        
        .toast-success {
            background: #27ae60;
        }
        
        .toast-error {
            background: #e74c3c;
        }
        
        .toast-warning {
            background: #f39c12;
        }
        
        .toast-info {
            background: #3498db;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <!-- Ìó§Îçî ÏòÅÏó≠ -->
    <header class="header">
        <div class="header-top">
            <div class="system-title">
                <span style="font-size: 24px;">üóÑÔ∏è</span>
                <h1>ÌäúÎãùÍ¥ÄÎ¶¨ÏãúÏä§ÌÖú TMS v2.0</h1>
            </div>
            <div class="user-area">
                <span id="dbName">DB: PROD_DB</span>
                <span>User: TUNING_ADMIN</span>
                <span>Role: DBA</span>
                <span id="currentTime">ÏµúÏ¢ÖÏ†ëÏÜç: 2025-01-08 10:30:25</span>
                <button class="btn btn-danger" style="font-size: 10px; padding: 4px 8px;" onclick="showToast('Î°úÍ∑∏ÏïÑÏõÉÎêòÏóàÏäµÎãàÎã§', 'info')">Logout</button>
            </div>
        </div>
        
        <nav class="main-menu">
            <ul class="menu-list">
                <li class="menu-item active">
                    <a onclick="loadDashboard()">SQL Î™®ÎãàÌÑ∞ÎßÅ</a>
                    <ul class="sub-menu">
                        <li><a onclick="loadRealtimeMonitoring()">Ïã§ÏãúÍ∞Ñ SQL Î™®ÎãàÌÑ∞ÎßÅ</a></li>
                        <li><a onclick="loadTopSQL('buffer')">Top SQL (Buffer Gets)</a></li>
                        <li><a onclick="loadTopSQL('elapsed')">Top SQL (Elapsed Time)</a></li>
                        <li><a onclick="loadTopSQL('cpu')">Top SQL (CPU Time)</a></li>
                        <li><a onclick="showSQLSearch()">SQL Full Text Ï°∞Ìöå</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a>ÌäúÎãù Í¥ÄÎ¶¨</a>
                    <ul class="sub-menu">
                        <li><a onclick="showRegisterSQL()">ÌäúÎãù ÎåÄÏÉÅ SQL Îì±Î°ù</a></li>
                        <li><a onclick="loadTuningProgress()">ÌäúÎãù ÏßÑÌñâ ÌòÑÌô©</a></li>
                        <li><a onclick="loadTuningHistory()">ÌäúÎãù Ïù¥Î†• Í¥ÄÎ¶¨</a></li>
                        <li><a onclick="loadTuningResult()">ÌäúÎãù Í≤∞Í≥º Î∂ÑÏÑù</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a>SQL Trace</a>
                    <ul class="sub-menu">
                        <li><a onclick="showTraceSettings()">Trace ÏÑ§Ï†ï</a></li>
                        <li><a onclick="loadTraceFiles()">Trace ÌååÏùº Î∂ÑÏÑù</a></li>
                        <li><a onclick="loadTKPROF()">TKPROF Í≤∞Í≥º Ï°∞Ìöå</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a>AWR/ADDM</a>
                    <ul class="sub-menu">
                        <li><a onclick="generateAWR()">AWR Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±</a></li>
                        <li><a onclick="loadAWRSQL()">AWR SQL Î∂ÑÏÑù</a></li>
                        <li><a onclick="loadADDM()">ADDM Î¶¨Ìè¨Ìä∏</a></li>
                        <li><a onclick="loadASH()">ASH Î¶¨Ìè¨Ìä∏</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a>Ïã§ÌñâÍ≥ÑÌöç</a>
                    <ul class="sub-menu">
                        <li><a onclick="showExplainPlan()">Ïã§ÌñâÍ≥ÑÌöç Ï°∞Ìöå</a></li>
                        <li><a onclick="comparePlans()">Ïã§ÌñâÍ≥ÑÌöç ÎπÑÍµê</a></li>
                        <li><a onclick="managePlanBaseline()">Plan Baseline Í¥ÄÎ¶¨</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a>ÌôòÍ≤ΩÏÑ§Ï†ï</a>
                    <ul class="sub-menu">
                        <li><a onclick="showMonitoringSettings()">Î™®ÎãàÌÑ∞ÎßÅ ÏÑ§Ï†ï</a></li>
                        <li><a onclick="showThresholdSettings()">ÏûÑÍ≥ÑÍ∞í ÏÑ§Ï†ï</a></li>
                        <li><a onclick="showAlertSettings()">ÏïåÎ¶º ÏÑ§Ï†ï</a></li>
                        <li><a onclick="showUserManagement()">ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>
    
    <!-- Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="container">
        <!-- Ï¢åÏ∏° Ìä∏Î¶¨ Î©îÎâ¥ -->
        <aside class="sidebar">
            <div class="tree-menu">
                <div class="tree-title">üìä SQL Î™®ÎãàÌÑ∞ÎßÅ</div>
                <div class="tree-item active" onclick="selectTreeItem(this); loadRealtimeMonitoring()">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>Ïã§ÏãúÍ∞Ñ Î™®ÎãàÌÑ∞ÎßÅ</span>
                </div>
                <div class="tree-item" onclick="selectTreeItem(this); loadTopSQL('buffer')">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>Top SQL Î∂ÑÏÑù</span>
                </div>
                <div class="tree-item" onclick="selectTreeItem(this); loadWaitEvents()">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>Wait Event Î∂ÑÏÑù</span>
                </div>
                <div class="tree-item" onclick="selectTreeItem(this); loadSessionMonitoring()">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>Session Î™®ÎãàÌÑ∞ÎßÅ</span>
                </div>
                <div class="tree-item" onclick="selectTreeItem(this); loadLockMonitoring()">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>Lock Î™®ÎãàÌÑ∞ÎßÅ</span>
                </div>
                
                <div class="tree-title" style="margin-top: 20px;">üîß ÌäúÎãù ÏûëÏóÖ</div>
                <div class="tree-item" onclick="selectTreeItem(this); filterTuningStatus('in_progress')">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>ÏßÑÌñâÏ§ë (<span id="inProgressCount">8</span>)</span>
                </div>
                <div class="tree-item" onclick="selectTreeItem(this); filterTuningStatus('pending')">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>ÎåÄÍ∏∞Ï§ë (<span id="pendingCount">12</span>)</span>
                </div>
                <div class="tree-item" onclick="selectTreeItem(this); filterTuningStatus('completed')">
                    <span class="tree-icon">‚ñ∂</span>
                    <span>ÏôÑÎ£å (<span id="completedCount">145</span>)</span>
                </div>
            </div>
        </aside>
        
        <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† ÏòÅÏó≠ -->
        <main class="main-content" id="mainContent">
            <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
        </main>
    </div>
    
    <!-- Î™®Îã¨ -->
    <div id="sqlModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">SQL ÏÉÅÏÑ∏ Ï†ïÎ≥¥</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
            </div>
        </div>
    </div>
    
    <!-- Toast Î©îÏãúÏßÄ -->
    <div id="toast" class="toast"></div>
    
    <script>
        // Mock Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±
        const mockData = {
            // SQL Î™©Î°ù Îç∞Ïù¥ÌÑ∞
            sqlList: [],
            
            // ÏÑ±Îä• Î©îÌä∏Î¶≠ Îç∞Ïù¥ÌÑ∞
            metrics: {
                bufferCacheHit: 89.2,
                executionsPerSec: 1234,
                avgResponseTime: 45,
                sgaUsed: 2.3,
                activeSessions: 156
            },
            
            // ÌäúÎãù Ïù¥Î†• Îç∞Ïù¥ÌÑ∞
            tuningHistory: [],
            
            // Ïã§ÌñâÍ≥ÑÌöç Îç∞Ïù¥ÌÑ∞
            executionPlans: {},
            
            // Wait Event Îç∞Ïù¥ÌÑ∞
            waitEvents: [],
            
            // Session Îç∞Ïù¥ÌÑ∞
            sessions: []
        };
        
        // SQL Î™©Î°ù ÏÉùÏÑ±
        function generateSQLList() {
            const modules = ['HR_APP', 'SALES_RPT', 'INV_MGMT', 'ANALYTICS', 'CRM_APP', 'BATCH_JOB', 'FINANCE', 'REPORTING', 'ETL_PROC', 'WEB_SERVICE'];
            const schemas = ['HR', 'SALES', 'INVENTORY', 'DW', 'CRM', 'BATCH', 'FIN', 'RPT', 'ETL', 'WEB'];
            const statuses = ['Critical', 'Warning', 'Normal', 'Tuning'];
            
            const sqlTemplates = [
                'SELECT /*+ FULL(t) */ * FROM {table} WHERE {condition}',
                'SELECT COUNT(*) FROM {table} WHERE {condition}',
                'UPDATE {table} SET {column} = :1 WHERE {condition}',
                'DELETE FROM {table} WHERE {condition}',
                'INSERT INTO {table} SELECT * FROM {source} WHERE {condition}',
                'MERGE INTO {table} USING {source} ON ({condition})',
                'SELECT /*+ PARALLEL(8) */ {columns} FROM {table} GROUP BY {group}',
                'SELECT {columns} FROM {table1} JOIN {table2} ON {join_condition}',
                'WITH cte AS (SELECT * FROM {table}) SELECT * FROM cte WHERE {condition}',
                'SELECT /*+ INDEX(t idx) */ {columns} FROM {table} t WHERE {condition}'
            ];
            
            const tables = ['employees', 'orders', 'products', 'customers', 'transactions', 'inventory', 'sales', 'reports', 'logs', 'audit'];
            
            for (let i = 0; i < 200; i++) {
                const sqlId = generateSQLId();
                const module = modules[Math.floor(Math.random() * modules.length)];
                const schema = schemas[Math.floor(Math.random() * schemas.length)];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const template = sqlTemplates[Math.floor(Math.random() * sqlTemplates.length)];
                const table = tables[Math.floor(Math.random() * tables.length)];
                
                const sql = template
                    .replace(/{table}/g, table)
                    .replace(/{table1}/g, table)
                    .replace(/{table2}/g, tables[Math.floor(Math.random() * tables.length)])
                    .replace(/{source}/g, tables[Math.floor(Math.random() * tables.length)])
                    .replace(/{condition}/g, `${getRandomColumn()} = :1`)
                    .replace(/{column}/g, getRandomColumn())
                    .replace(/{columns}/g, getRandomColumns())
                    .replace(/{group}/g, getRandomColumn())
                    .replace(/{join_condition}/g, `t1.id = t2.${getRandomColumn()}_id`);
                
                mockData.sqlList.push({
                    rank: i + 1,
                    sqlId: sqlId,
                    module: module,
                    schema: schema,
                    sqlText: sql,
                    elapsedTime: Math.floor(Math.random() * 20000) + 100,
                    cpuTime: Math.floor(Math.random() * 15000) + 50,
                    bufferGets: Math.floor(Math.random() * 5000000) + 1000,
                    diskReads: Math.floor(Math.random() * 500000) + 100,
                    executions: Math.floor(Math.random() * 10000) + 1,
                    rowsProcessed: Math.floor(Math.random() * 1000000) + 100,
                    status: status,
                    firstLoadTime: generateRandomDate(-30),
                    lastActiveTime: generateRandomDate(-1),
                    getsPerExec: 0,
                    planHashValue: Math.floor(Math.random() * 9999999999)
                });
                
                // Gets per Exec Í≥ÑÏÇ∞
                mockData.sqlList[i].getsPerExec = Math.floor(mockData.sqlList[i].bufferGets / mockData.sqlList[i].executions);
            }
        }
        
        // ÌäúÎãù Ïù¥Î†• ÏÉùÏÑ±
        function generateTuningHistory() {
            const tuners = ['ÍπÄDBA', 'Ïù¥ÌäúÎÑà', 'Î∞ïÏ†ÑÎ¨∏', 'ÏµúÍ¥ÄÎ¶¨', 'Ï†ïÎ∂ÑÏÑù', 'Ïú§ÏÑ±Îä•'];
            const methods = ['Index ÏÉùÏÑ±', 'SQL Ïû¨ÏûëÏÑ±', 'ÌÜµÍ≥ÑÏ†ïÎ≥¥ Í∞±Ïã†', 'ÌååÌã∞ÏÖîÎãù', 'ÌûåÌä∏ Ï∂îÍ∞Ä', 'Ï°∞Ïù∏ ÏàúÏÑú Î≥ÄÍ≤Ω', 'ÏÑúÎ∏åÏøºÎ¶¨ Ï†úÍ±∞'];
            
            for (let i = 0; i < 50; i++) {
                const sqlIndex = Math.floor(Math.random() * mockData.sqlList.length);
                const sql = mockData.sqlList[sqlIndex];
                const beforeTime = sql.elapsedTime;
                const improvement = Math.floor(Math.random() * 90) + 10;
                const afterTime = Math.floor(beforeTime * (100 - improvement) / 100);
                
                mockData.tuningHistory.push({
                    date: generateRandomDate(-60),
                    sqlId: sql.sqlId,
                    tuner: tuners[Math.floor(Math.random() * tuners.length)],
                    method: methods[Math.floor(Math.random() * methods.length)],
                    beforeElapsed: beforeTime,
                    afterElapsed: afterTime,
                    beforeBuffer: sql.bufferGets,
                    afterBuffer: Math.floor(sql.bufferGets * (100 - improvement) / 100),
                    improvement: improvement,
                    status: improvement > 50 ? 'ÏôÑÎ£å' : 'ÏßÑÌñâÏ§ë',
                    note: `${sql.module} Î™®Îìà ÏÑ±Îä• Í∞úÏÑ†`
                });
            }
        }
        
        // Wait Events ÏÉùÏÑ±
        function generateWaitEvents() {
            const events = [
                { name: 'db file sequential read', waits: 12345, time: 234, avgWait: 18.9, pctDbTime: 45.2 },
                { name: 'db file scattered read', waits: 8901, time: 156, avgWait: 17.5, pctDbTime: 30.1 },
                { name: 'log file sync', waits: 5678, time: 67, avgWait: 11.8, pctDbTime: 12.9 },
                { name: 'SQL*Net message from client', waits: 3456, time: 45, avgWait: 13.0, pctDbTime: 8.7 },
                { name: 'buffer busy waits', waits: 234, time: 12, avgWait: 51.3, pctDbTime: 2.3 },
                { name: 'latch: cache buffers chains', waits: 189, time: 8, avgWait: 42.3, pctDbTime: 1.5 },
                { name: 'enq: TX - row lock contention', waits: 67, time: 5, avgWait: 74.6, pctDbTime: 1.0 },
                { name: 'direct path read', waits: 1234, time: 23, avgWait: 18.6, pctDbTime: 4.4 },
                { name: 'log file parallel write', waits: 890, time: 15, avgWait: 16.9, pctDbTime: 2.9 },
                { name: 'library cache lock', waits: 45, time: 2, avgWait: 44.4, pctDbTime: 0.4 }
            ];
            mockData.waitEvents = events;
        }
        
        // Sessions ÏÉùÏÑ±
        function generateSessions() {
            const programs = ['sqlplus', 'JDBC Thin Client', 'SQL Developer', 'TOAD', 'Application Server'];
            const states = ['ACTIVE', 'INACTIVE', 'KILLED', 'CACHED', 'SNIPED'];
            
            for (let i = 0; i < 50; i++) {
                mockData.sessions.push({
                    sid: 100 + i,
                    serial: Math.floor(Math.random() * 99999),
                    username: `USER${Math.floor(Math.random() * 20) + 1}`,
                    program: programs[Math.floor(Math.random() * programs.length)],
                    status: states[Math.floor(Math.random() * states.length)],
                    logonTime: generateRandomDate(-1),
                    lastCallET: Math.floor(Math.random() * 3600),
                    sqlId: mockData.sqlList[Math.floor(Math.random() * mockData.sqlList.length)].sqlId,
                    event: mockData.waitEvents[Math.floor(Math.random() * mockData.waitEvents.length)].name,
                    blockingSession: Math.random() > 0.9 ? 100 + Math.floor(Math.random() * 50) : null
                });
            }
        }
        
        // Ïú†Ìã∏Î¶¨Ìã∞ Ìï®ÏàòÎì§
        function generateSQLId() {
            const chars = '0123456789abcdefghijklmnopqrstuvwxyz';
            let sqlId = '';
            for (let i = 0; i < 13; i++) {
                sqlId += chars[Math.floor(Math.random() * chars.length)];
            }
            return sqlId;
        }
        
        function getRandomColumn() {
            const columns = ['id', 'name', 'date', 'status', 'type', 'value', 'amount', 'code', 'flag', 'level'];
            return columns[Math.floor(Math.random() * columns.length)];
        }
        
        function getRandomColumns() {
            const count = Math.floor(Math.random() * 3) + 2;
            const columns = [];
            for (let i = 0; i < count; i++) {
                columns.push(getRandomColumn());
            }
            return columns.join(', ');
        }
        
        function generateRandomDate(daysAgo) {
            const date = new Date();
            date.setDate(date.getDate() + daysAgo + Math.random() * Math.abs(daysAgo));
            return date.toISOString().slice(0, 19).replace('T', ' ');
        }
        
        // Ìä∏Î¶¨ Î©îÎâ¥ ÏÑ†ÌÉù
        function selectTreeItem(item) {
            document.querySelectorAll('.tree-item').forEach(i => i.classList.remove('active'));
            item.classList.add('active');
        }
        
        // Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú Î°úÎìú
        function loadDashboard() {
            const html = `
                <!-- ÏÑ±Îä• Î©îÌä∏Î¶≠ Ïπ¥Îìú -->
                <div class="metric-cards">
                    <div class="metric-card">
                        <div class="metric-value">${mockData.metrics.bufferCacheHit}%</div>
                        <div class="metric-label">Buffer Cache Hit</div>
                        <div class="metric-trend trend-down">‚ñº 2.3%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${mockData.metrics.executionsPerSec.toLocaleString()}</div>
                        <div class="metric-label">Executions/sec</div>
                        <div class="metric-trend trend-up">‚ñ≤ 15.2%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${mockData.metrics.avgResponseTime}ms</div>
                        <div class="metric-label">Avg Response Time</div>
                        <div class="metric-trend trend-up">‚ñ≤ 5.1%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${mockData.metrics.sgaUsed}GB</div>
                        <div class="metric-label">SGA Used</div>
                        <div class="metric-trend">‚Äî 0.0%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${mockData.metrics.activeSessions}</div>
                        <div class="metric-label">Active Sessions</div>
                        <div class="metric-trend trend-up">‚ñ≤ 8.3%</div>
                    </div>
                </div>
                
                ${getSearchPanel()}
                ${getTabContainer()}
            `;
            document.getElementById('mainContent').innerHTML = html;
            
            // Ï≤´ Î≤àÏß∏ ÌÉ≠ ÌôúÏÑ±Ìôî
            showTab('topSQL');
        }
        
        // Í≤ÄÏÉâ Ìå®ÎÑê HTML
        function getSearchPanel() {
            return `
                <div class="search-panel">
                    <div class="search-title">üîç SQL Í≤ÄÏÉâ Ï°∞Í±¥</div>
                    <div class="search-form">
                        <div class="form-group">
                            <label>SQL ID</label>
                            <input type="text" id="searchSqlId" placeholder="SQL ID ÏûÖÎ†•">
                        </div>
                        <div class="form-group">
                            <label>Module</label>
                            <select id="searchModule">
                                <option value="">Ï†ÑÏ≤¥</option>
                                <option>HR_APP</option>
                                <option>SALES_RPT</option>
                                <option>INV_MGMT</option>
                                <option>ANALYTICS</option>
                                <option>CRM_APP</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ï°∞ÌöåÍ∏∞Í∞Ñ</label>
                            <input type="datetime-local" id="searchFrom" value="2025-01-08T00:00">
                        </div>
                        <div class="form-group">
                            <label>~</label>
                            <input type="datetime-local" id="searchTo" value="2025-01-08T23:59">
                        </div>
                        <div class="form-group">
                            <label>Elapsed Time (ms)</label>
                            <input type="number" id="searchElapsed" placeholder=">= 1000">
                        </div>
                        <div class="form-group">
                            <label>Buffer Gets</label>
                            <input type="number" id="searchBuffer" placeholder=">= 10000">
                        </div>
                        <div class="form-group">
                            <label>Executions</label>
                            <input type="number" id="searchExecutions" placeholder=">= 100">
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="searchSQL()">Ï°∞Ìöå</button>
                            <button class="btn btn-default" onclick="resetSearch()">Ï¥àÍ∏∞Ìôî</button>
                            <button class="btn btn-success" onclick="exportExcel()">Excel</button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // ÌÉ≠ Ïª®ÌÖåÏù¥ÎÑà HTML
        function getTabContainer() {
            return `
                <div class="tab-container">
                    <div class="tab-header">
                        <button class="tab-button active" onclick="showTab('topSQL')">Top SQL</button>
                        <button class="tab-button" onclick="showTab('sqlDetail')">SQL Detail</button>
                        <button class="tab-button" onclick="showTab('execPlan')">Execution Plan</button>
                        <button class="tab-button" onclick="showTab('waitEvent')">Wait Event</button>
                        <button class="tab-button" onclick="showTab('tuningHistory')">Tuning History</button>
                    </div>
                    
                    <div id="topSQL" class="tab-content active">
                        ${getTopSQLContent()}
                    </div>
                    
                    <div id="sqlDetail" class="tab-content">
                        ${getSQLDetailContent()}
                    </div>
                    
                    <div id="execPlan" class="tab-content">
                        ${getExecutionPlanContent()}
                    </div>
                    
                    <div id="waitEvent" class="tab-content">
                        ${getWaitEventContent()}
                    </div>
                    
                    <div id="tuningHistory" class="tab-content">
                        ${getTuningHistoryContent()}
                    </div>
                </div>
            `;
        }
        
        // Top SQL Ïª®ÌÖêÏ∏†
        function getTopSQLContent() {
            const topSQLs = mockData.sqlList.slice(0, 20);
            
            let rows = '';
            topSQLs.forEach(sql => {
                const statusBadge = getStatusBadge(sql.status);
                rows += `
                    <tr onclick="selectRow(this)" ondblclick="showSQLDetail('${sql.sqlId}')">
                        <td><input type="checkbox" onclick="event.stopPropagation()"></td>
                        <td>${sql.rank}</td>
                        <td><a href="#" onclick="showSQLDetail('${sql.sqlId}'); return false;" style="color: #3498db;">${sql.sqlId}</a></td>
                        <td>${sql.module}</td>
                        <td>${sql.schema}</td>
                        <td style="text-align: right;">${sql.elapsedTime.toLocaleString()}</td>
                        <td style="text-align: right;">${sql.cpuTime.toLocaleString()}</td>
                        <td style="text-align: right; color: ${getValueColor(sql.bufferGets)}; font-weight: bold;">${sql.bufferGets.toLocaleString()}</td>
                        <td style="text-align: right;">${sql.diskReads.toLocaleString()}</td>
                        <td style="text-align: right;">${sql.executions.toLocaleString()}</td>
                        <td style="text-align: right;">${sql.getsPerExec.toLocaleString()}</td>
                        <td>${statusBadge}</td>
                        <td style="text-align: left; max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${sql.sqlText}">${sql.sqlText}</td>
                    </tr>
                `;
            });
            
            return `
                <div class="grid-container">
                    <div class="grid-header">
                        <div class="grid-title">
                            <span>üìã Top SQL by Buffer Gets</span>
                            <span class="grid-count">${topSQLs.length}</span>
                        </div>
                        <div class="grid-tools">
                            <button class="btn btn-warning" style="font-size: 10px; padding: 4px 8px;" onclick="registerForTuning()">ÌäúÎãù ÎåÄÏÉÅ Îì±Î°ù</button>
                            <button class="btn btn-primary" style="font-size: 10px; padding: 4px 8px;" onclick="showExecutionPlan()">Ïã§ÌñâÍ≥ÑÌöç Ï°∞Ìöå</button>
                            <button class="btn btn-success" style="font-size: 10px; padding: 4px 8px;" onclick="compareSQL()">SQL ÎπÑÍµê</button>
                        </div>
                    </div>
                    <table class="grid-table" id="topSQLTable">
                        <thead>
                            <tr>
                                <th width="30"><input type="checkbox" onclick="toggleAllCheckboxes(this)"></th>
                                <th width="50" onclick="sortTable(1)">ÏàúÏúÑ ‚ñº</th>
                                <th width="120" onclick="sortTable(2)">SQL ID</th>
                                <th width="150" onclick="sortTable(3)">Module</th>
                                <th width="100" onclick="sortTable(4)">Schema</th>
                                <th width="100" onclick="sortTable(5)">Elapsed(ms)</th>
                                <th width="100" onclick="sortTable(6)">CPU Time(ms)</th>
                                <th width="100" onclick="sortTable(7)">Buffer Gets</th>
                                <th width="100" onclick="sortTable(8)">Disk Reads</th>
                                <th width="80" onclick="sortTable(9)">Executions</th>
                                <th width="100" onclick="sortTable(10)">Gets/Exec</th>
                                <th width="80">ÏÉÅÌÉú</th>
                                <th>SQL Text</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${rows}
                        </tbody>
                    </table>
                    <div class="pagination">
                        <button class="page-btn" onclick="changePage('first')">‚â™</button>
                        <button class="page-btn" onclick="changePage('prev')">Ôºú</button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn" onclick="changePage(2)">2</button>
                        <button class="page-btn" onclick="changePage(3)">3</button>
                        <button class="page-btn" onclick="changePage(4)">4</button>
                        <button class="page-btn" onclick="changePage(5)">5</button>
                        <button class="page-btn" onclick="changePage('next')">Ôºû</button>
                        <button class="page-btn" onclick="changePage('last')">‚â´</button>
                    </div>
                </div>
            `;
        }
        
        // SQL Detail Ïª®ÌÖêÏ∏†
        function getSQLDetailContent() {
            const sql = mockData.sqlList[0];
            return `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <h3 style="margin-bottom: 10px;">SQL Information</h3>
                        <table class="grid-table">
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold; width: 150px;">SQL ID</td>
                                <td>${sql.sqlId}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Plan Hash Value</td>
                                <td>${sql.planHashValue}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Module</td>
                                <td>${sql.module}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Schema</td>
                                <td>${sql.schema}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">First Load Time</td>
                                <td>${sql.firstLoadTime}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Last Active Time</td>
                                <td>${sql.lastActiveTime}</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div>
                        <h3 style="margin-bottom: 10px;">Performance Metrics</h3>
                        <table class="grid-table">
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold; width: 150px;">Executions</td>
                                <td>${sql.executions.toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Elapsed Time</td>
                                <td>${sql.elapsedTime.toLocaleString()} ms</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">CPU Time</td>
                                <td>${sql.cpuTime.toLocaleString()} ms</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Buffer Gets</td>
                                <td>${sql.bufferGets.toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Disk Reads</td>
                                <td>${sql.diskReads.toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Rows Processed</td>
                                <td>${sql.rowsProcessed.toLocaleString()}</td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <h3 style="margin: 15px 0 10px;">SQL Full Text</h3>
                <div class="sql-viewer" id="sqlTextViewer">
                    ${formatSQL(sql.sqlText)}
                </div>
                
                <div style="margin-top: 15px;">
                    <button class="btn btn-primary" onclick="copySQL()">SQL Î≥µÏÇ¨</button>
                    <button class="btn btn-warning" onclick="registerForTuning()">ÌäúÎãù ÎåÄÏÉÅ Îì±Î°ù</button>
                    <button class="btn btn-success" onclick="showBindVariables()">Bind Î≥ÄÏàò Ï°∞Ìöå</button>
                </div>
            `;
        }
        
        // Execution Plan Ïª®ÌÖêÏ∏†
        function getExecutionPlanContent() {
            return `
                <h3 style="margin-bottom: 10px;">Execution Plan</h3>
                <div class="grid-container">
                    <table class="grid-table">
                        <thead>
                            <tr>
                                <th>Id</th>
                                <th>Operation</th>
                                <th>Name</th>
                                <th>Rows</th>
                                <th>Bytes</th>
                                <th>Cost</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0</td>
                                <td style="text-align: left;">SELECT STATEMENT</td>
                                <td></td>
                                <td>1,234</td>
                                <td>567K</td>
                                <td>890</td>
                                <td>00:00:01</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td style="text-align: left;">&nbsp;&nbsp;SORT ORDER BY</td>
                                <td></td>
                                <td>1,234</td>
                                <td>567K</td>
                                <td>890</td>
                                <td>00:00:01</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td style="text-align: left;">&nbsp;&nbsp;&nbsp;&nbsp;HASH JOIN</td>
                                <td></td>
                                <td>1,234</td>
                                <td>567K</td>
                                <td>789</td>
                                <td>00:00:01</td>
                            </tr>
                            <tr style="background: #fff3cd;">
                                <td>3</td>
                                <td style="text-align: left;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TABLE ACCESS FULL</td>
                                <td>EMPLOYEES</td>
                                <td>10,000</td>
                                <td>234K</td>
                                <td>456</td>
                                <td>00:00:01</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td style="text-align: left;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TABLE ACCESS FULL</td>
                                <td>DEPARTMENTS</td>
                                <td>100</td>
                                <td>3K</td>
                                <td>3</td>
                                <td>00:00:01</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td style="text-align: left;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INDEX RANGE SCAN</td>
                                <td>DEPT_IDX</td>
                                <td>100</td>
                                <td>1K</td>
                                <td>2</td>
                                <td>00:00:01</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h3 style="margin: 15px 0 10px;">Predicate Information</h3>
                <div style="background: #f8f9fa; padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 11px;">
                    2 - access("E"."DEPT_ID"="D"."DEPT_ID")<br>
                    3 - filter("E"."HIRE_DATE">=TO_DATE(' 2024-01-01 00:00:00', 'syyyy-mm-dd hh24:mi:ss') AND "E"."SALARY">50000)<br>
                    5 - access("D"."DEPT_ID"=:B1)
                </div>
                
                <h3 style="margin: 15px 0 10px;">Optimizer Statistics</h3>
                <div style="background: #f8f9fa; padding: 10px; border: 1px solid #ddd; font-size: 11px;">
                    <strong>Table Statistics:</strong><br>
                    EMPLOYEES: Rows=10,000, Blocks=500, Avg Row Len=100<br>
                    DEPARTMENTS: Rows=100, Blocks=5, Avg Row Len=50<br><br>
                    <strong>Index Statistics:</strong><br>
                    DEPT_IDX: Distinct Keys=100, Leaf Blocks=3, Clustering Factor=50
                </div>
            `;
        }
        
        // Wait Event Ïª®ÌÖêÏ∏†
        function getWaitEventContent() {
            let rows = '';
            mockData.waitEvents.forEach(event => {
                rows += `
                    <tr>
                        <td style="text-align: left;">${event.name}</td>
                        <td>${event.waits.toLocaleString()}</td>
                        <td>${event.time}</td>
                        <td>${event.avgWait}</td>
                        <td>
                            <div style="display: flex; align-items: center;">
                                <div style="width: ${event.pctDbTime}%; background: #3498db; height: 15px; margin-right: 5px;"></div>
                                ${event.pctDbTime}%
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            return `
                <h3 style="margin-bottom: 10px;">Wait Event Analysis</h3>
                <div class="grid-container">
                    <table class="grid-table">
                        <thead>
                            <tr>
                                <th>Event</th>
                                <th>Waits</th>
                                <th>Time(s)</th>
                                <th>Avg Wait(ms)</th>
                                <th>% DB Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${rows}
                        </tbody>
                    </table>
                </div>
                
                <div class="chart-container" style="margin-top: 20px;">
                    <div class="chart-header">Wait Event Distribution</div>
                    <div class="mini-chart" style="display: flex; align-items: flex-end; padding: 20px;">
                        ${mockData.waitEvents.map(e => 
                            `<div class="chart-bar" style="height: ${e.pctDbTime * 3}px;" title="${e.name}: ${e.pctDbTime}%"></div>`
                        ).join('')}
                    </div>
                </div>
            `;
        }
        
        // Tuning History Ïª®ÌÖêÏ∏†
        function getTuningHistoryContent() {
            const history = mockData.tuningHistory.slice(0, 10);
            let rows = '';
            
            history.forEach(h => {
                const improvementColor = h.improvement > 50 ? '#27ae60' : (h.improvement > 30 ? '#f39c12' : '#e74c3c');
                const statusBadge = h.status === 'ÏôÑÎ£å' ? 
                    '<span class="badge badge-normal">ÏôÑÎ£å</span>' : 
                    '<span class="badge badge-warning">ÏßÑÌñâÏ§ë</span>';
                
                rows += `
                    <tr>
                        <td>${h.date}</td>
                        <td>${h.sqlId}</td>
                        <td>${h.tuner}</td>
                        <td>${h.method}</td>
                        <td>${h.beforeElapsed.toLocaleString()} ms</td>
                        <td>${h.afterElapsed.toLocaleString()} ms</td>
                        <td style="color: ${improvementColor}; font-weight: bold;">${h.improvement}%</td>
                        <td>${statusBadge}</td>
                        <td>${h.note}</td>
                    </tr>
                `;
            });
            
            return `
                <h3 style="margin-bottom: 10px;">Tuning History</h3>
                <div class="grid-container">
                    <table class="grid-table">
                        <thead>
                            <tr>
                                <th>ÌäúÎãùÏùºÏûê</th>
                                <th>SQL ID</th>
                                <th>ÌäúÎÑà</th>
                                <th>ÌäúÎãùÎ∞©Î≤ï</th>
                                <th>Í∞úÏÑ† Ï†Ñ</th>
                                <th>Í∞úÏÑ† ÌõÑ</th>
                                <th>Í∞úÏÑ†Ïú®</th>
                                <th>ÏÉÅÌÉú</th>
                                <th>ÎπÑÍ≥†</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${rows}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="showTuningReport()">ÌäúÎãù Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±</button>
                    <button class="btn btn-success" onclick="exportTuningHistory()">Excel Îã§Ïö¥Î°úÎìú</button>
                </div>
            `;
        }
        
        // Ïú†Ìã∏Î¶¨Ìã∞ Ìï®ÏàòÎì§
        function getStatusBadge(status) {
            const badges = {
                'Critical': 'badge-critical',
                'Warning': 'badge-warning',
                'Normal': 'badge-normal',
                'Tuning': 'badge-info'
            };
            return `<span class="badge ${badges[status]}">${status}</span>`;
        }
        
        function getValueColor(value) {
            if (value > 1000000) return '#e74c3c';
            if (value > 500000) return '#f39c12';
            return '#333';
        }
        
        function formatSQL(sql) {
            return sql
                .replace(/SELECT|FROM|WHERE|AND|OR|ORDER BY|GROUP BY|HAVING|JOIN|LEFT JOIN|RIGHT JOIN|INNER JOIN|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP/gi, 
                    match => `<span class="sql-keyword">${match}</span>`)
                .replace(/\b(employees|orders|products|customers|transactions|inventory|sales|reports|logs|audit)\b/gi,
                    match => `<span class="sql-table">${match}</span>`)
                .replace(/\b(id|name|date|status|type|value|amount|code|flag|level)\b/gi,
                    match => `<span class="sql-column">${match}</span>`)
                .replace(/'[^']*'/g, match => `<span class="sql-string">${match}</span>`)
                .replace(/\b\d+\b/g, match => `<span class="sql-number">${match}</span>`);
        }
        
        // ÌÉ≠ Ï†ÑÌôò
        function showTab(tabName) {
            // Î™®Îì† ÌÉ≠ Ïª®ÌÖêÏ∏† Ïà®Í∏∞Í∏∞
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Î™®Îì† ÌÉ≠ Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // ÏÑ†ÌÉùÎêú ÌÉ≠ ÌëúÏãú
            const tabContent = document.getElementById(tabName);
            if (tabContent) {
                tabContent.classList.add('active');
            }
            
            // ÏÑ†ÌÉùÎêú ÌÉ≠ Î≤ÑÌäº ÌôúÏÑ±Ìôî
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }
        
        // Ìñâ ÏÑ†ÌÉù
        function selectRow(row) {
            row.classList.toggle('selected');
        }
        
        // SQL ÏÉÅÏÑ∏ Î≥¥Í∏∞
        function showSQLDetail(sqlId) {
            const sql = mockData.sqlList.find(s => s.sqlId === sqlId);
            if (!sql) return;
            
            const modalBody = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>SQL Information</h4>
                        <table class="grid-table" style="margin-top: 10px;">
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">SQL ID</td>
                                <td>${sql.sqlId}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Module</td>
                                <td>${sql.module}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Schema</td>
                                <td>${sql.schema}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Status</td>
                                <td>${getStatusBadge(sql.status)}</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h4>Performance Metrics</h4>
                        <table class="grid-table" style="margin-top: 10px;">
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Elapsed Time</td>
                                <td>${sql.elapsedTime.toLocaleString()} ms</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">CPU Time</td>
                                <td>${sql.cpuTime.toLocaleString()} ms</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Buffer Gets</td>
                                <td>${sql.bufferGets.toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td style="background: #ecf0f1; font-weight: bold;">Executions</td>
                                <td>${sql.executions.toLocaleString()}</td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <h4 style="margin-top: 20px;">SQL Full Text</h4>
                <div class="sql-viewer" style="margin-top: 10px;">
                    ${formatSQL(sql.sqlText)}
                </div>
                
                <div style="margin-top: 20px; text-align: right;">
                    <button class="btn btn-primary" onclick="closeModal()">Îã´Í∏∞</button>
                    <button class="btn btn-warning" onclick="registerForTuning()">ÌäúÎãù ÎåÄÏÉÅ Îì±Î°ù</button>
                </div>
            `;
            
            document.getElementById('modalTitle').textContent = `SQL ÏÉÅÏÑ∏ Ï†ïÎ≥¥ - ${sqlId}`;
            document.getElementById('modalBody').innerHTML = modalBody;
            document.getElementById('sqlModal').classList.add('show');
        }
        
        // Î™®Îã¨ Îã´Í∏∞
        function closeModal() {
            document.getElementById('sqlModal').classList.remove('show');
        }
        
        // Toast Î©îÏãúÏßÄ
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast toast-${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Í≤ÄÏÉâ Í∏∞Îä•
        function searchSQL() {
            showToast('Í≤ÄÏÉâÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§', 'success');
            loadDashboard();
        }
        
        // Í≤ÄÏÉâ Ï¥àÍ∏∞Ìôî
        function resetSearch() {
            document.getElementById('searchSqlId').value = '';
            document.getElementById('searchModule').value = '';
            document.getElementById('searchElapsed').value = '';
            document.getElementById('searchBuffer').value = '';
            document.getElementById('searchExecutions').value = '';
            showToast('Í≤ÄÏÉâ Ï°∞Í±¥Ïù¥ Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§', 'info');
        }
        
        // Excel ÎÇ¥Î≥¥ÎÇ¥Í∏∞
        function exportExcel() {
            showToast('Excel ÌååÏùºÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§', 'success');
        }
        
        // ÌäúÎãù ÎåÄÏÉÅ Îì±Î°ù
        function registerForTuning() {
            showToast('ÌäúÎãù ÎåÄÏÉÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏäµÎãàÎã§', 'warning');
            updateTuningCounts();
        }
        
        // ÌäúÎãù Ïπ¥Ïö¥Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
        function updateTuningCounts() {
            const pending = parseInt(document.getElementById('pendingCount').textContent);
            document.getElementById('pendingCount').textContent = pending + 1;
        }
        
        // Ï†ÑÏ≤¥ Ï≤¥ÌÅ¨Î∞ïÏä§ ÌÜ†Í∏Ä
        function toggleAllCheckboxes(checkbox) {
            const checkboxes = document.querySelectorAll('.grid-table tbody input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = checkbox.checked);
        }
        
        // ÌÖåÏù¥Î∏î Ï†ïÎ†¨
        function sortTable(columnIndex) {
            const table = document.querySelector('.grid-table tbody');
            const rows = Array.from(table.rows);
            
            rows.sort((a, b) => {
                const aValue = a.cells[columnIndex].textContent;
                const bValue = b.cells[columnIndex].textContent;
                
                if (!isNaN(aValue.replace(/,/g, '')) && !isNaN(bValue.replace(/,/g, ''))) {
                    return parseFloat(bValue.replace(/,/g, '')) - parseFloat(aValue.replace(/,/g, ''));
                }
                return aValue.localeCompare(bValue);
            });
            
            rows.forEach(row => table.appendChild(row));
        }
        
        // Ïã§ÏãúÍ∞Ñ ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toISOString().slice(0, 19).replace('T', ' ');
            document.getElementById('currentTime').textContent = `ÏµúÏ¢ÖÏ†ëÏÜç: ${timeString}`;
        }
        
        // Ïã§ÏãúÍ∞Ñ Î©îÌä∏Î¶≠ ÏóÖÎç∞Ïù¥Ìä∏
        function updateMetrics() {
            // ÎûúÎç§ÌïòÍ≤å Î©îÌä∏Î¶≠ Í∞í Î≥ÄÍ≤Ω
            mockData.metrics.bufferCacheHit = Math.round((mockData.metrics.bufferCacheHit + (Math.random() - 0.5) * 2) * 10) / 10;
            mockData.metrics.executionsPerSec = Math.floor(mockData.metrics.executionsPerSec + (Math.random() - 0.5) * 100);
            mockData.metrics.avgResponseTime = Math.floor(mockData.metrics.avgResponseTime + (Math.random() - 0.5) * 5);
            mockData.metrics.activeSessions = Math.floor(mockData.metrics.activeSessions + (Math.random() - 0.5) * 10);
            
            // Î©îÌä∏Î¶≠ Ïπ¥ÎìúÍ∞Ä ÏûàÏùÑ ÎïåÎßå ÏóÖÎç∞Ïù¥Ìä∏
            const metricCards = document.querySelectorAll('.metric-card');
            if (metricCards.length > 0) {
                metricCards[0].querySelector('.metric-value').textContent = mockData.metrics.bufferCacheHit + '%';
                metricCards[1].querySelector('.metric-value').textContent = mockData.metrics.executionsPerSec.toLocaleString();
                metricCards[2].querySelector('.metric-value').textContent = mockData.metrics.avgResponseTime + 'ms';
                metricCards[4].querySelector('.metric-value').textContent = mockData.metrics.activeSessions;
            }
        }
        
        // Îã§ÏñëÌïú Í∏∞Îä• Ìï®ÏàòÎì§
        function loadRealtimeMonitoring() {
            showToast('Ïã§ÏãúÍ∞Ñ Î™®ÎãàÌÑ∞ÎßÅÏùÑ Î°úÎìúÌï©ÎãàÎã§', 'info');
            loadDashboard();
        }
        
        function loadTopSQL(type) {
            showToast(`Top SQL (${type})ÏùÑ Î°úÎìúÌï©ÎãàÎã§`, 'info');
            loadDashboard();
        }
        
        function showSQLSearch() {
            showToast('SQL Í≤ÄÏÉâ ÌôîÎ©¥ÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
        }
        
        function loadTuningProgress() {
            showToast('ÌäúÎãù ÏßÑÌñâ ÌòÑÌô©ÏùÑ Î°úÎìúÌï©ÎãàÎã§', 'info');
        }
        
        function loadTuningHistory() {
            showToast('ÌäúÎãù Ïù¥Î†•ÏùÑ Î°úÎìúÌï©ÎãàÎã§', 'info');
        }
        
        function loadTuningResult() {
            showToast('ÌäúÎãù Í≤∞Í≥º Î∂ÑÏÑùÏùÑ Î°úÎìúÌï©ÎãàÎã§', 'info');
        }
        
        function showRegisterSQL() {
            showToast('SQL Îì±Î°ù ÌôîÎ©¥ÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
        }
        
        function showTraceSettings() {
            showToast('Trace ÏÑ§Ï†ï ÌôîÎ©¥ÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
        }
        
        function loadTraceFiles() {
            showToast('Trace ÌååÏùºÏùÑ Î∂ÑÏÑùÌï©ÎãàÎã§', 'info');
        }
        
        function loadTKPROF() {
            showToast('TKPROF Í≤∞Í≥ºÎ•º Ï°∞ÌöåÌï©ÎãàÎã§', 'info');
        }
        
        function generateAWR() {
            showToast('AWR Î¶¨Ìè¨Ìä∏Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§', 'info');
        }
        
        function loadAWRSQL() {
            showToast('AWR SQLÏùÑ Î∂ÑÏÑùÌï©ÎãàÎã§', 'info');
        }
        
        function loadADDM() {
            showToast('ADDM Î¶¨Ìè¨Ìä∏Î•º Î°úÎìúÌï©ÎãàÎã§', 'info');
        }
        
        function loadASH() {
            showToast('ASH Î¶¨Ìè¨Ìä∏Î•º Î°úÎìúÌï©ÎãàÎã§', 'info');
        }
        
        function showExplainPlan() {
            showToast('Ïã§ÌñâÍ≥ÑÌöçÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§', 'info');
        }
        
        function comparePlans() {
            showToast('Ïã§ÌñâÍ≥ÑÌöçÏùÑ ÎπÑÍµêÌï©ÎãàÎã§', 'info');
        }
        
        function managePlanBaseline() {
            showToast('Plan BaselineÏùÑ Í¥ÄÎ¶¨Ìï©ÎãàÎã§', 'info');
        }
        
        function showMonitoringSettings() {
            showToast('Î™®ÎãàÌÑ∞ÎßÅ ÏÑ§Ï†ïÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
        }
        
        function showThresholdSettings() {
            showToast('ÏûÑÍ≥ÑÍ∞í ÏÑ§Ï†ïÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
        }
        
        function showAlertSettings() {
            showToast('ÏïåÎ¶º ÏÑ§Ï†ïÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
        }
        
        function showUserManagement() {
            showToast('ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ ÌôîÎ©¥ÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
        }
        
        function showExecutionPlan() {
            showToast('Ïã§ÌñâÍ≥ÑÌöçÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§', 'info');
        }
        
        function compareSQL() {
            showToast('SQLÏùÑ ÎπÑÍµêÌï©ÎãàÎã§', 'info');
        }
        
        function copySQL() {
            showToast('SQLÏù¥ ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§', 'success');
        }
        
        function showBindVariables() {
            showToast('Bind Î≥ÄÏàòÎ•º Ï°∞ÌöåÌï©ÎãàÎã§', 'info');
        }
        
        function showTuningReport() {
            showToast('ÌäúÎãù Î¶¨Ìè¨Ìä∏Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§', 'info');
        }
        
        function exportTuningHistory() {
            showToast('ÌäúÎãù Ïù¥Î†•ÏùÑ ExcelÎ°ú Îã§Ïö¥Î°úÎìúÌï©ÎãàÎã§', 'success');
        }
        
        function loadWaitEvents() {
            showToast('Wait EventÎ•º Î∂ÑÏÑùÌï©ÎãàÎã§', 'info');
        }
        
        function loadSessionMonitoring() {
            showToast('SessionÏùÑ Î™®ÎãàÌÑ∞ÎßÅÌï©ÎãàÎã§', 'info');
        }
        
        function loadLockMonitoring() {
            showToast('LockÏùÑ Î™®ÎãàÌÑ∞ÎßÅÌï©ÎãàÎã§', 'info');
        }
        
        function filterTuningStatus(status) {
            showToast(`${status} ÏÉÅÌÉúÏùò SQLÏùÑ Ï°∞ÌöåÌï©ÎãàÎã§`, 'info');
        }
        
        function changePage(page) {
            showToast(`ÌéòÏù¥ÏßÄ ${page}Î°ú Ïù¥ÎèôÌï©ÎãàÎã§`, 'info');
        }
        
        // Ï¥àÍ∏∞Ìôî
        window.onload = function() {
            // Mock Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±
            generateSQLList();
            generateTuningHistory();
            generateWaitEvents();
            generateSessions();
            
            // ÎåÄÏãúÎ≥¥Îìú Î°úÎìú
            loadDashboard();
            
            // Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë
            setInterval(updateCurrentTime, 1000);
            setInterval(updateMetrics, 5000);
            
            // Ï¥àÍ∏∞ ÏïåÎ¶º
            setTimeout(() => {
                showToast('ÌäúÎãùÍ¥ÄÎ¶¨ÏãúÏä§ÌÖúÏóê Ï†ëÏÜçÌïòÏòÄÏäµÎãàÎã§', 'success');
            }, 500);
        };
        
        // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠Ïãú Îã´Í∏∞
        window.onclick = function(event) {
            if (event.target.className === 'modal show') {
                event.target.classList.remove('show');
            }
        };
    </script>
</body>
</html>
